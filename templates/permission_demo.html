{% extends 'base.html' %}
{% load permission_tags %}

{% block title %}‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå{% endblock %}

{% block content %}
<div class="bg-white">
    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</h1>
        
        <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
        <div class="bg-blue-50 p-4 rounded-lg mb-6">
            <h2 class="text-xl font-semibold mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</h2>
            <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ:</strong> {{ user.username }}</p>
            <p><strong>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</strong> {{ user.get_full_name }}</p>
            <p><strong>‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó:</strong> {% user_role_badge user %}</p>
            <p><strong>‡∏Å‡∏•‡∏∏‡πà‡∏°:</strong> 
                {% for group in user.groups.all %}
                    <span class="bg-gray-200 px-2 py-1 rounded text-sm">{{ group.name }}</span>
                {% endfor %}
            </p>
        </div>

        <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            
            <!-- ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô -->
            <div class="bg-white border border-gray-200 rounded-lg p-6">
                <h3 class="text-lg font-semibold mb-4">‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h3>
                
                <!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
                {% if user|has_permission:"App_Products.view_product" %}
                    <div class="flex items-center text-green-600 mb-2">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ
                    </div>
                {% else %}
                    <div class="flex items-center text-red-600 mb-2">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                        ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ
                    </div>
                {% endif %}
                
                <!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
                {% if user|can_create:"App_Products.product" %}
                    <div class="flex items-center text-green-600 mb-2">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ
                    </div>
                {% else %}
                    <div class="flex items-center text-red-600 mb-2">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                        ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ
                    </div>
                {% endif %}
            </div>
            
            <!-- ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
            <div class="bg-white border border-gray-200 rounded-lg p-6">
                <h3 class="text-lg font-semibold mb-4">‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
                
                {% if user|in_group:"‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (Manager)" %}
                    <div class="bg-purple-100 border border-purple-200 rounded p-3 mb-2">
                        <span class="text-purple-800 font-medium">üèÜ ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</span>
                        <p class="text-purple-700 text-sm">‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö</p>
                    </div>
                {% endif %}
                
                {% if user|in_group:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢ (Sales Staff)" %}
                    <div class="bg-green-100 border border-green-200 rounded p-3 mb-2">
                        <span class="text-green-800 font-medium">üíº ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢</span>
                        <p class="text-green-700 text-sm">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>
                    </div>
                {% endif %}
                
                {% if user|in_group:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏•‡∏±‡∏á (Warehouse Staff)" %}
                    <div class="bg-blue-100 border border-blue-200 rounded p-3 mb-2">
                        <span class="text-blue-800 font-medium">üì¶ ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏•‡∏±‡∏á</span>
                        <p class="text-blue-700 text-sm">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡πá‡∏≠‡∏Å</p>
                    </div>
                {% endif %}
                
                {% if not user.groups.all %}
                    <p class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏î‡πÜ</p>
                {% endif %}
            </div>
        </div>
        
        <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á -->
        <div class="mt-8">
            <h3 class="text-xl font-semibold mb-4">‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á</h3>
            
            <!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÇ‡∏°‡∏î‡∏π‡∏• -->
            {% check_module_access user "products" as product_access %}
            {% check_module_access user "purchase" as purchase_access %}
            {% check_module_access user "inventory" as inventory_access %}
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold mb-2">üìã ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h4>
                    <div class="space-y-1 text-sm">
                        <div class="flex justify-between">
                            <span>‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:</span>
                            <span class="{% if product_access.can_view %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if product_access.can_view %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà:</span>
                            <span class="{% if product_access.can_create %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if product_access.can_create %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:</span>
                            <span class="{% if product_access.can_edit %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if product_access.can_edit %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏•‡∏ö:</span>
                            <span class="{% if product_access.can_delete %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if product_access.can_delete %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold mb-2">üõí ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h4>
                    <div class="space-y-1 text-sm">
                        <div class="flex justify-between">
                            <span>‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:</span>
                            <span class="{% if purchase_access.can_view %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if purchase_access.can_view %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏Ç‡∏≠‡∏ã‡∏∑‡πâ‡∏≠:</span>
                            <span class="{% if purchase_access.can_create %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if purchase_access.can_create %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥:</span>
                            <span class="{% if purchase_access.can_approve %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if purchase_access.can_approve %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold mb-2">üì¶ ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h4>
                    <div class="space-y-1 text-sm">
                        <div class="flex justify-between">
                            <span>‡∏î‡∏π‡∏™‡∏ï‡πá‡∏≠‡∏Å:</span>
                            <span class="{% if inventory_access.can_view %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if inventory_access.can_view %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</span>
                            <span class="{% if inventory_access.can_create %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if inventory_access.can_create %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å:</span>
                            <span class="{% if inventory_access.can_edit %}text-green-600{% else %}text-red-600{% endif %}">
                                {% if inventory_access.can_edit %}‚úì{% else %}‚úó{% endif %}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå -->
        <div class="mt-8 bg-gray-50 rounded-lg p-6">
            <h3 class="text-xl font-semibold mb-4">‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</h3>
            
            <div class="flex flex-wrap gap-2">
                {% if user|can_view_module:"products" %}
                    <a href="#" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                        ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                    </a>
                {% endif %}
                
                {% if user|can_create:"App_Products.product" %}
                    <a href="#" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
                        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
                    </a>
                {% endif %}
                
                {% if user|in_group:"‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (Manager)" %}
                    <a href="#" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">
                        ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
                    </a>
                {% endif %}
                
                {% if user|in_group:"‡∏ô‡∏±‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Accountant)" %}
                    <a href="#" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded">
                        ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
                    </a>
                {% endif %}
                
                {% if user.is_superuser %}
                    <a href="/admin/" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                        Django Admin
                    </a>
                {% endif %}
            </div>
            
            {% if not user.groups.all and not user.is_superuser %}
                <div class="mt-4 p-4 bg-yellow-100 border border-yellow-200 rounded">
                    <p class="text-yellow-800">
                        <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏î‡πÜ 
                        ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                    </p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
